name: Deploy the application
on:
  workflow_dispatch:
    inputs:
      TARGET_ENV:
        type: choice
        description: Make a choice
        options:
          - Dev
          - Integration
      TARGET_IMAGE:
        type: choice
        description: Make a choice
        options: default: ${{ steps.get_files.outputs.files }}
          

jobs:
  BROCHURE_API_DEPLOY_PREPARE:
    runs-on: [ 'ubuntu-latest' ]
    steps:
      - name: Printing Input Choice of Environment
        run: |
          echo "Deployment starts with env details as '${{ github.event.inputs.TARGET_ENV }}'"
      - id: get_files
      - name: Printing Input Choice of Environment
         run: |
          echo "files=$(ls -lrt /tmp)" >> $GITHUB_ENV

jobs:
  BROCHURE_API_DEPLOY:
    needs: BROCHURE_API_DEPLOY_PREPARE
    runs-on: [ 'ubuntu-latest' ]
    steps:
      - name: Printing Input Choice of Environment
        run: |
          echo "Deployment starts with env details as '${{ github.event.inputs.TARGET_ENV }}'"
